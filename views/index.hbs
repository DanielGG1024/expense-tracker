<div class="container">
    <div class="d-flex flex-column">
        <div class="form-group text-center mt-3">
            <form action="/" style="width: 40%;" class="mx-auto">
                <select class="form-control" name="category" id="category" onchange="submit()">
                    <option value="">所有類別</option>
                    {{#each categories}}
                    <option value="{{this._id}}">{{this.category}}</option>
                    {{/each}}
                </select>
            </form>
        </div>
        <div class="form-group text-center form-row mx-auto" style="width: 40%;">
            <div class="alert alert-info w-100 pl-3" role="alert">
                <small class="">總金額</small>
                <code class="h1">{{totalAmount}}</code>
            </div>
        </div>
    </div>
</div>


<div class="container">
    <div class="row ">
        {{#each records}}
        <div class="col-2 text-center">
            <span class="mr-1">
                <i class="mt-3 {{this.category.icon}}"></i>
            </span>
        </div>
        <div class="col-4">
            <h3>{{this.name}}</h3>
            <small>{{toDate this.date}}</small>
        </div>

        <div class="col-2">
            <h3>{{this.amount}}</h3>
        </div>
        <div class="col-4">
            <a class="btn btn-success" href="/records/edit/{{this._id}}">修改</a>
            <form class="ml-3" action="/records/{{this._id}}?_method=DELETE" method="POST"
                style="display:inline-block;">
                <button type="submit" class="btn btn-danger">delete</button>
            </form>
        </div>
        {{/each}}
    </div>
    <div class="text-center">
        <a class="btn btn-secondary mx-auto my-3 font-weight-bold p-3" href="/records/new">新增支出</a>
    </div>
</div>